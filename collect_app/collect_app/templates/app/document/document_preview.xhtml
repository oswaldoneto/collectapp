{% extends "layout/template.xhtml" %}

{% load guardian_tags %}
{% load permission_checker %}
{% load kilobytefy %}

{% load verbatim %}

{% block title %}Collect Project :: Documento{% endblock %}

{% block import_style %}
    <style type="text/css">
    </style>
{% endblock %}

{% block startup_script %}

    {% get_public_perms doc as public_permissions %}
    {% get_obj_perms user for doc as "document_permissions" %}

    <script>
        $(document).data("document_id",'{{params.document}}')
    </script>
    <script type="text/javascript" src="{{STATIC_URL}}js/app/document/document_context_menu.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/app/document/document_preview.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}js/app/tag/tag-util.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
        });
    </script>
{% endblock %}

{% block trail %}
    <ul>
        <li><a href="#">Home</a></li>
        <li>Documento</li>
        <li>Visualizar</li>
    </ul>
{% endblock %}

{% block context_menu %}
    {% include "app/document/document_context_menu.xhtml" %}
{% endblock %}

{% block content %}

    <div class="ui-app-header">
        <div class="ui-app-title">Visualizar Documento</div>
    </div>
    <div class="clear"></div>

    <div>

        <!-- Files -->
        <div class="floatl">
            <table class="simple_table ui-corner-all">
                <tbody>
                    {% if not document %}
                        {% for attach in attachment_list %}
                            <tr>
                                <td>
                                    <a rel="uic_download-file_link" href="{{attach.file.key}}">
                                        <i class="icon-cloud-download icon-large"></i>
                                    </a>
                                </td>
                                <td>
                                    <a rel="uic_visualize-file_link" href="{{attach.file.key}}">
                                        <i class="icon-external-link-sign icon-large"></i>
                                    </a>
                                </td>
                                <td style="text-align: left; font-size: 1.2em">{{attach.file.filename}}</td>
                                <td style="text-align: right"><p class="margin_l_double ui-state-disabled">{{attach.file.filesize|kilobytefy}}</p></td>
                                <td style="width: 5px">
                                    <a rel="uic_delete_file_link" href="{{attach.file.key}}">
                                        <i class="icon-trash icon-large"></i>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td class="ui-state-disabled" colspan="4" align="center">Nenhum arquivo anexado</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <!-- Classification -->
        <div class="floatl margin_l_default">
            {% if category %}
                <div style="font-weight: bold; margin-bottom: 5px; font-size: 1.4em">{{category.title}}</div>
                <div>
                    <table class="attribute_table">
                        <tbody>
                            {% for doc_att in attribute_list %}
                                <tr>
                                    <td style="font-size: 1.2em; font-weight: bold;" >
                                        <span class="ui-state-disabled">{{doc_att.attribute.name}}</span>
                                        <small><i class="icon-angle-right ui-state-disabled"></i></small>
                                    </td>
                                    <td style="font-size: 1.2em">{{doc_att.value.value}}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% endif %}
        </div>

        <div class="clear"></div>

        <!-- Tags -->
        <div class="margin_top_double">
            <div class="floatl" style="margin-top: 8px; margin-right: 5px">
                <span class="bold">Tags</span>
            </div>
            <div class="floatr">
                <div class="floatl" style="width: 690px">
                    <!--
                    <div id="uic_tag_feedback"  class="ui-widget ui-state-error ui-corner-all ui-feedback hide">
                        <span class="ui-icon ui-icon-alert floatl"></span><p id="uic_tag_message"></p>
                    </div>
                    -->
                    <ul id="uic_tags"></ul>
                </div>
                <div class="floatr margin_lr_default" style="margin-top: 8px">
                    <a id="uic_taglist_link">
                        <i class="icon-list-ul icon-large"></i>
                    </a>
                </div>
            </div>
        </div>
        <div id="uic_tag_dialog" class="hide">
            <table id="uic_tag_table" class="display">
            </table>
        </div>

    </div>

    <div class="clear"></div>

    <!-- -->

{% endblock %}